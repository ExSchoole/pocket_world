#parse("layout/macros.vm")
#head("City Center")

#@body()
<div class="row">
    <a href="#springUrl('/city/resources/')" class="btn btn-primary">#springMessage('city.resources')</a>
</div>
<div id="message">
</div>
<div class="col-md-7">
    #showResources(${dto.getResourceDto().getGold()},${dto.getResourceDto().getTimber()},${dto.getResourceDto().getClay()},${dto.getResourceDto().getCorn()})
    <div class="row">
        #foreach($position in [1,2,3,4])
            <div class="col-md-3">
                #showbuilding( $dto.getBuildings(), $position )
            </div>
        #end

    </div>

    <div class="row">
        <div class="col-md-3">
            #foreach($position in [5,6])
                   #showbuilding($dto.getBuildings(), $position )
               #end
        </div>

        <div class="col-md-6">
            <div class="central_image building_position"></div>
        </div>

        <div class="col-md-3">
            #foreach($position in [7,8])
                 #showbuilding($dto.getBuildings(), $position )
               #end
        </div>

    </div>

    <div class="row">
        #foreach($position in [9,10,11,12])
            <div class="col-md-3">
                #showbuilding($dto.getBuildings(), $position )
            </div>
        #end
    </div>
</div>


<div class="col-md-5">
    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-3">
            #addcarousel($buildingTypes)
        </div>
    </div>
</div>
#end

<script src="#springUrl('/js/lib/underscore-min.js')"></script>
<script src="#springUrl('/js/lib/jquery-2.1.4.min.js')"></script>
<script src="#springUrl('/js/lib/jquery-ui.min.js')"></script>
<script src="#springUrl('/js/lib/bootstrap.min.js')"></script>
<script src="#springUrl('/js/dictionary.js')"></script>
<script src="#springUrl('/js/dragDrop.js')"></script>
<script src="#springUrl('/js/ajaxCallAddBuilding.js')"></script>
<script src="#springUrl('/js/jquery.verticalCarousel.js')"></script>
<script src="#springUrl('/js/ajaxCalls.js')"></script>
<script src="#springUrl('/js/timer.js')"></script>


<script>
    _.extend(DICTIONARY.urls, {
        addBuilding: "#springUrl('/city/center/addBuilding')",
        getBuildingQueue: "#springUrl('/getBuildingQueue')",
        changeStatus: "#springUrl('/changeStatus')"
    });

    var buildingTypeToShow = 'building';

    timers(buildingTypeToShow);

    var info = new Array();
        #foreach( $key in $dto.getTimeInfo().entrySet() )
        info[info.length] = {
            type: "$key.getKey().getBuildingType().name().toLowerCase()",
            level: "$key.getKey().getLevel()",
            time: "$key.getValue()",
        }
        #end

    initBuildingsDragDrop("building_karusel", "building_empty", "$dto.getNickName()", info, 'building');

    $(function () {
        $("#carouselId").verticalCarousel({nSlots: 3, speed: 900});
    });

</script> 
