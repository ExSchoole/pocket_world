#parse("layout/macros.vm")
#head("City Center")

#@body()
<div class="row">
    <a href="#springUrl('/city/resources/')" class="btn btn-primary">#springMessage('city.resources')</a>
</div>

<div class="col-md-7">
    <h1>${dto.NickName}'s city center</h1>
    #showResources(${dto.getResourceDto().getGold()},${dto.getResourceDto().getTimber()},${dto.getResourceDto().getClay()},${dto.getResourceDto().getCorn()})
    <div class="row">
        #foreach($position in [1,2,3,4])
            <div class="col-md-3">
                #showbuilding( $dto.getBuildings(), $position )
            </div>
        #end

    </div>

    <div class="row">
        <div class="col-md-3">
            #foreach($position in [5,6])
                   #showbuilding($dto.getBuildings(), $position )
               #end
        </div>

        <div class="col-md-6">
            <div class="central_image building_position"></div>
        </div>

        <div class="col-md-3">
            #foreach($position in [7,8])
                 #showbuilding($dto.getBuildings(), $position )
               #end
        </div>

    </div>

    <div class="row">
        #foreach($position in [9,10,11,12])
            <div class="col-md-3">
                #showbuilding($dto.getBuildings(), $position )
            </div>
        #end
    </div>
</div>


<div class="col-md-5">
         <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-3">
            	#addcarousel($buildingTypes)
            </div>
        </div> 
</div> 
#end


<script src="#springUrl('/js/jquery-2.1.4.min.js')"></script>
<script src="#springUrl('/js/jquery-ui.min.js')"></script>
<script src="#springUrl('/js/dragdrop.js')"></script>
<script src="#springUrl('/js/jquery.verticalCarousel.js')"></script>
<script>
	var cityConfig = {};
	var typeOfBuilding;
 	cityConfig.buildUrl = "#springUrl('')";
	 $(function () {
	    $( ".building_karusel" ).draggable({
	        appendTo: 'body',
	        helper: 'clone',
	    	revert: "invalid"
	    });

	    $( ".building_empty" ).droppable({
	    	hoverClass: "over",
	        drop: function( event, ui ) {
	          $( this ).removeClass( 'building_empty' )
	                   .addClass("building_" + $(ui.draggable).attr("id") )
	                   .addClass( 'building');		               
	          $( ui.draggable).removeClass("building_" + $(ui.draggable).attr("id") )
	                          .removeClass( 'building_karusel' )
	                          .removeClass( 'cursor' );
	          $('li').find("#"+$(ui.draggable).attr('id')).remove()
	          new dragDrop(cityConfig,$(ui.draggable).attr("id"),$(this).attr("id"));
	        },
	      });
	 });
	 
     $(document).ready(function () {
	     $("#carouselId").verticalCarousel({nSlots: 3, speed: 900});
     });
     
</script> 
